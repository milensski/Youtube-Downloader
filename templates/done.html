{% extends 'base.html' %}
{% block content %}


<div class="row">
    <div class="d-flex align-items-center justify-content-center">

    </div>
    <div class="col-lg-12 d-flex justify-content-center text-center mb-3" align="center">
        <img src='{{thumnail}}' width="500" height="250">
    </div>

    <div class="col-lg-12 d-flex justify-content-center text-center" align="center">
        <div class="card-content center-block">
            <p class="text-danger lead fs-5"><strong>{{name}} </strong></p>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-lg-12 d-flex justify-content-center " align="center">
        <div class="card-content center-block ">
            <form method="POST" action='/download'>

                <label for="itag" id="itag-label" class="label-primary mr-1">Select resolution:</label>
                <select id='itag' name='itag' class="form-select" aria-label="Default select example">
                    {% for video in video_and_audio %}
                    <option class="dropdown-item" value="{{video.itag}}">{{video.resolution}}</option>

                    {% endfor %}
                    <option class="dropdown-item" value="Audio">Audio</option>
                </select>
                <button id="download" name="download_url" type="submit" class="btn btn-primary btn-sm ml-1 mb-3"
                        value="{{url}}"
                        onclick="update();"
                        data-toggle="modal"
                        data-target="#myModal">

                    Download

                </button>

                <div id='btnHome' class='modal-footer' style="display: none">
                    <a class="btn btn-primary" href='/index' role="button">Return</a>
                </div>


            </form>


        </div>

    </div>

</div>

<div id='myModal' class="modal fade bd-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
     aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <button id='after-download' class="btn btn-primary mb-3" type="button" disabled style="display: none">
                <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                Downloading...
            </button>

            <p class="description" align="center"> Please wait while downloading...</p>
            <div id='return' class='modal-footer'>
                <a class="btn btn-primary" href='/index' role="button">New download</a>
            </div>
        </div>
    </div>

</div>


<script>
function update(){
 $("#download").hide();
 $("#after-download").show();
 $("#progress").show();
 $("#return").show();
 $("#btnHome").show();
 $("#itag").hide();
 $("#itag-label").hide();

}







</script>

<script>$('#myModal').modal(options)</script>

{% endblock %}